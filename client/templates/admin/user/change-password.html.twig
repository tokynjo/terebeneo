{% extends 'admin/layout.html.twig' %}
{% block title %}{{ 'users.password.change'|trans({},'label', 'fr') }}{% endblock %}
{% block body_id 'step1' %}

{% block body %}
    <!-- Breadcrumbs-->

    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <i class="fa fa-fw fa-chevron-right"></i><a href="{{ path('admin_user_index') }}">{{ 'menu.users'|trans({},'label', 'fr') }}</a>
        </li>
        {% if(user.id == app.user.id) %}
            <li class="breadcrumb-item active"><a href="{{ path('admin_user_edit',{'id':app.user.id}) }}">{{ 'users.my_profil'|trans({},'label', 'fr') }}</a></li>
        {% else %}
            <li class="breadcrumb-item active">{{ 'common.edition'|trans({},'label', 'fr') }}</li>
        {% endif %}
        <li class="breadcrumb-item active">{{ 'users.password.password'|trans({},'label', 'fr') }}</li>
    </ol>
    <div class="row">
        <div class="col-12">
            <div class="card mb-3">
                <div class="card-header">
                    <h2><i class="fa fa-users"></i>{{ 'users.password.change'|trans({},'label', 'fr') }}</h2>
                </div>
                <div class="card-body">
                    {{ form_start(form, {'method':'POST','action': path('admin_user_edit_password',{'id': user.id}), 'attr': {'class': 'form-control no-border'}}) }}
                        <div class="form-group">
                            <div class="form-row">
                                <div class="col-md-6">
                                    <label for="exampleInputName">{{ 'users.password.current'|trans({},'label', 'fr') }}</label>
                                    {{ form_widget(form.current_password, { 'attr': {'class': 'form-control'} }) }}
                                    {% if form.current_password.vars.errors|length %}
                                        <div class="alert alert-danger alert-dismissable col-sm-12">{{ form.current_password.vars.errors[0].message }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-row">
                                <div class="col-md-6">
                                    <label for="exampleInputName">{{ 'users.password.new'|trans({},'label', 'fr') }}</label>
                                    {{ form_widget(form.plainPassword.first, { 'attr': {'class': 'form-control' } }) }}
                                    {% if form.plainPassword.first.vars.errors|length %}
                                        <div class="alert alert-danger alert-dismissable col-sm-12">{{ form.plainPassword.first.vars.errors[0].message }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-row">
                                <div class="col-md-6">
                                    <label for="exampleInputLastName">{{ 'users.password.confirm'|trans({},'label', 'fr') }}</label>
                                    {{ form_widget(form.plainPassword.second, { 'attr': {'class': 'form-control'} }) }}
                                    {% if form.plainPassword.second.vars.errors|length %}
                                        <div class="alert alert-danger alert-dismissable col-sm-12">{{ form.plainPassword.second.vars.errors[0].message }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="form-row">
                                <div class="col-md-2">
                                    <input type="submit" class="btn btn-primary btn-block" title="Enregistrer" value="Enregistrer">
                                </div>
                                <div class="col-md-2">
                                    <a href="{{ path('admin_user_index') }}" class="btn btn-secondary" title="Annuler">Annuler</a>
                                </div>
                            </div>
                        </div>

                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
{% endblock %}